; pling! (c) copyright Kroc Camen 2019-2020. unless otherwise noted,
; licenced under a MIT licence; you may reuse and modify this code
; how you please as long as you retain the copyright notice
;
; c64_init.wla : machine-specific intialisation for the Commodore 64
;===============================================================================
.INC    "cbm/cbm_basic.wla"

;===============================================================================
sys_init:
        ;-----------------------------------------------------------------------
        ; set up the screen:
        ;-----------------------------------------------------------------------
        lda # VIC_BLACK
        sta VIC_BORDER
        sta VIC_BACKGROUND

.DEF    @str    $0e, $93, $9e
.REDEF  @str    @str, 13, ">!< Pling! C64 v0.0"
.REDEF  @str    @str, 13, "    Kroc Camen <github.com/Kroc/pling>"
.REDEF  @str    @str, 13, "    built: ", WLA_TIME, $05
.REDEF  @str    @str, 13, 13

        ldy # 0
-       lda @ver.w, y
        jsr KERNAL_CHROUT
        iny
        cpy # @str.length
        bne -

        ;-----------------------------------------------------------------------
        jmp pling_init

@ver:   .ASC    @str