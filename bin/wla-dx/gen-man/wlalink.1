.\" Man page generated from reStructuredText.
.
.TH "WLALINK" "1" "Dec 12, 2019" "9.10" "wla-dx"
.SH NAME
wlalink \- WLA Linker
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.SH SYNOPSIS
.nf
\fBwlalink\fP [\fBOPTIONS\fP] \fBLINK_FILE\fP \fBOUTPUT_FILE\fP
.fi
.sp
.SH OPTIONS
.INDENT 0.0
.TP
.B \-v
Display information about ROM file after a succesful linking
.TP
.B \-s
Produce NO$GMB symbol file
.TP
.B \-S
Produce WLA symbol file
.TP
.B \-d
Discard all unreferenced \fBFREE\fP and \fBSEMIFREE\fP sections
.TP
.B \-i
Write list files (Note: WLA needs \fB\-i\fP as wel)
.TP
.BI \-L \ LIBDIR
Look in LIBDIR for libaries before looking in CWD
.UNINDENT
.sp
Choose one:
.INDENT 0.0
.TP
.BI \-b \ OUT
Program file linking
.TP
.BI \-r \ OUT
ROM image linking
.UNINDENT
.SH DESCRIPTION
.sp
\fBwlalink(1)\fP is a part of WLA\-DX. It links one or more object files
(and perhaps some library files) together to produce a ROM image / program file.
.sp
LINK_FILE is a text file that contains information about the files you want
to link together. Here\(aqs the format:
.INDENT 0.0
.IP 1. 3
You must define the group for the files. Put the name of the group
inside brackets. Valid group definitions are
.INDENT 3.0
.INDENT 3.5
.sp
.nf
.ft C
[objects]
[libraries]
[header]
[footer]
[definitions]
.ft P
.fi
.UNINDENT
.UNINDENT
.IP 2. 3
Start to list the file names.
.INDENT 3.0
.INDENT 3.5
.sp
.nf
.ft C
[objects]
main.o
vbi.o
level_01.o
\&...
.ft P
.fi
.UNINDENT
.UNINDENT
.IP 3. 3
Give parameters to the library files:
.INDENT 3.0
.INDENT 3.5
.sp
.nf
.ft C
[libraries]
bank 0 slot 1 speed.lib
bank 4 slot 2 map_data.lib
\&...
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Here you can also use \fBbase\fP to define the 65816 CPU bank number
(like \fB\&.BASE\fP works in WLA):
.INDENT 3.0
.INDENT 3.5
.sp
.nf
.ft C
[libraries]
bank 0 slot 1 base $80 speed.lib
bank 4 slot 2 base $80 map_data.lib
\&...
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
You must tell WLALINK the bank and the slot for the library files.
.IP 4. 3
If you want to use header and/or footer in your project,
you can type the following:
.INDENT 3.0
.INDENT 3.5
.sp
.nf
.ft C
[header]
header.dat
[footer]
footer.dat
.ft P
.fi
.UNINDENT
.UNINDENT
.IP 5. 3
If you want to make value definitions, here\(aqs your chance:
.INDENT 3.0
.INDENT 3.5
.sp
.nf
.ft C
[definitions]
debug 1
max_str_len 128
start $150
\&...
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.sp
If flag \fB\-i\fP is given, \fBwlalink(1)\fP will write list files. Note that
you must compile the object and library files with \fB\-i\fP flag as well.
Otherwise \fBwlalink(1)\fP has no extra information it needs to build list
files.
.sp
Here is an example of a list file: Let\(aqs assume you\(aqve compiled a source file
called \fBmain.s\fP using the \fB\-i\fP flag. After you\(aqve linked the result also
with the \fB\-i\fP flag \fBwlalink(1)\fP has created a list file called
\fBmain.lst\fP\&. This file contains the source text and the result data the source
compiled into. List files are good for debugging.
.sp
Make sure you don\(aqt create duplicate labels in different places in the
memory map as they break the linking loop. Duplicate labels are allowed when
they overlap each other in the destination machine\(aqs memory.
.SH EXAMPLES
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
wlalink \-r linkfile testa.sfc
wlalink \-d \-i \-b linkfile testb.sfc
wlalink \-v \-S \-L ../../lib linkfile testc.sfc
.ft P
.fi
.UNINDENT
.UNINDENT
.SH SEE ALSO
.sp
\fBwla\-dx(7)\fP
.SH AUTHOR
vhelin
.SH COPYRIGHT
2019, vhelin
.\" Generated by docutils manpage writer.
.
